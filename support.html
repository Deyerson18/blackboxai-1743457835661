{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Soporte al Cliente</h1>
    
    <div class="flex flex-col md:flex-row gap-8">
        <!-- Main Content -->
        <div class="md:w-2/3">
            <!-- Contact Form -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h2 class="text-xl font-bold mb-4">Contáctanos</h2>
                <form id="supportForm" class="space-y-4">
                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700">Nombre</label>
                        <input type="text" id="name" name="name" required
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#FF6B35] focus:border-[#FF6B35]">
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Correo electrónico</label>
                        <input type="email" id="email" name="email" required
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#FF6B35] focus:border-[#FF6B35]">
                    </div>
                    <div>
                        <label for="subject" class="block text-sm font-medium text-gray-700">Asunto</label>
                        <select id="subject" name="subject"
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#FF6B35] focus:border-[#FF6B35]">
                            <option>Problema con un pedido</option>
                            <option>Pregunta sobre mi cuenta</option>
                            <option>Problema con un pago</option>
                            <option>Sugerencia</option>
                            <option>Otro</option>
                        </select>
                    </div>
                    <div>
                        <label for="message" class="block text-sm font-medium text-gray-700">Mensaje</label>
                        <textarea id="message" name="message" rows="4" required
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#FF6B35] focus:border-[#FF6B35]"></textarea>
                    </div>
                    <div>
                        <button type="submit" class="w-full bg-[#FF6B35] text-white py-2 px-4 rounded-md hover:bg-[#E55B2B] font-medium">
                            Enviar Mensaje
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- FAQ Section -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold mb-4">Preguntas Frecuentes</h2>
                
                <div class="space-y-4">
                    <!-- FAQ Item 1 -->
                    <div class="border-b border-gray-200 pb-4">
                        <button class="faq-toggle flex justify-between items-center w-full text-left">
                            <h3 class="font-medium">¿Cómo puedo realizar un pedido?</h3>
                            <i class="fas fa-chevron-down text-[#FF6B35]"></i>
                        </button>
                        <div class="faq-content mt-2 text-sm text-gray-600 hidden">
                            <p>Para realizar un pedido:</p>
                            <ol class="list-decimal pl-5 space-y-1 mt-2">
                                <li>Busca tu restaurante favorito en la página principal</li>
                                <li>Selecciona los productos que deseas ordenar</li>
                                <li>Agrega los productos al carrito</li>
                                <li>Selecciona tu dirección de entrega y método de pago</li>
                                <li>Confirma tu pedido</li>
                            </ol>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 2 -->
                    <div class="border-b border-gray-200 pb-4">
                        <button class="faq-toggle flex justify-between items-center w-full text-left">
                            <h3 class="font-medium">¿Cuáles son los métodos de pago disponibles?</h3>
                            <i class="fas fa-chevron-down text-[#FF6B35]"></i>
                        </button>
                        <div class="faq-content mt-2 text-sm text-gray-600 hidden">
                            <p>Aceptamos los siguientes métodos de pago:</p>
                            <ul class="list-disc pl-5 space-y-1 mt-2">
                                <li>Tarjeta de crédito/débito (Visa, MasterCard, American Express)</li>
                                <li>Pago en efectivo al momento de la entrega</li>
                                <li>Transferencia bancaria (solo para pedidos corporativos)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- More FAQ items... -->
                </div>
            </div>
        </div>
        
        <!-- Sidebar -->
        <div class="md:w-1/3">
            <!-- Help Options -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-xl font-bold mb-4">Opciones de Ayuda</h2>
                <div class="space-y-3">
                    <a href="#" class="block p-3 border border-gray-200 rounded-md hover:bg-gray-50 flex items-center">
                        <div class="w-10 h-10 rounded-full bg-[#FF6B35] text-white flex items-center justify-center mr-3">
                            <i class="fas fa-headset"></i>
                        </div>
                        <div>
                            <h3 class="font-medium">Chat en Vivo</h3>
                            <p class="text-sm text-gray-600">Disponible 24/7</p>
                        </div>
                    </a>
                    <a href="#" class="block p-3 border border-gray-200 rounded-md hover:bg-gray-50 flex items-center">
                        <div class="w-10 h-10 rounded-full bg-[#FF6B35] text-white flex items-center justify-center mr-3">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div>
                            <h3 class="font-medium">Llámanos</h3>
                            <p class="text-sm text-gray-600">+1 234 567 8900</p>
                        </div>
                    </a>
                    <a href="#" class="block p-3 border border-gray-200 rounded-md hover:bg-gray-50 flex items-center">
                        <div class="w-10 h-10 rounded-full bg-[#FF6B35] text-white flex items-center justify-center mr-3">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h3 class="font-medium">Correo Electrónico</h3>
                            <p class="text-sm text-gray-600">soporte@yavoy.com</p>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Contact Info -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold mb-4">Información de Contacto</h2>
                <div class="space-y-3">
                    <div class="flex items-start">
                        <i class="fas fa-map-marker-alt text-[#FF6B35] mt-1 mr-3"></i>
                        <div>
                            <h3 class="font-medium">Oficinas Centrales</h3>
                            <p class="text-sm text-gray-600">Av. Principal 123, Ciudad, País</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-clock text-[#FF6B35] mt-1 mr-3"></i>
                        <div>
                            <h3 class="font-medium">Horario de Atención</h3>
                            <p class="text-sm text-gray-600">Lunes a Viernes: 8:00 AM - 8:00 PM</p>
                            <p class="text-sm text-gray-600">Sábados: 9:00 AM - 5:00 PM</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-globe text-[#FF6B35] mt-1 mr-3"></i>
                        <div>
                            <h3 class="font-medium">Redes Sociales</h3>
                            <div class="flex space-x-3 mt-1">
                                <a href="#" class="text-[#FF6B35] hover:text-[#E55B2B]"><i class="fab fa-facebook-f"></i></a>
                                <a href="#" class="text-[#FF6B35] hover:text-[#E55B2B]"><i class="fab fa-twitter"></i></a>
                                <a href="#" class="text-[#FF6B35] hover:text-[#E55B2B]"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// FAQ Toggle functionality
document.querySelectorAll('.faq-toggle').forEach(button => {
    button.addEventListener('click', () => {
        const content = button.nextElementSibling;
        const icon = button.querySelector('i');
        
        content.classList.toggle('hidden');
        icon.classList.toggle('fa-chevron-down');
        icon.classList.toggle('fa-chevron-up');
    });
});

// Support form submission
document.getElementById('supportForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const user = auth.currentUser;
    const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        subject: document.getElementById('subject').value,
        message: document.getElementById('message').value,
        userId: user ? user.uid : null,
        timestamp: new Date()
    };
    
    try {
        // TODO: Save support ticket to Firestore
        showAlert('Tu mensaje ha sido enviado. Nos pondremos en contacto contigo pronto.');
        document.getElementById('supportForm').reset();
    } catch (error) {
        showAlert('Error al enviar el mensaje: ' + error.message, 'error');
    }
});
</script>
{% endblock %}